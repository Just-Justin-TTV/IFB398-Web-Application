{% extends "base.html" %}
{% load static %}

{% block head %}
<style>
/* Keyframes for animated background pattern */
@-webkit-keyframes Animation {
    0%{background-position:10% 0%}
    50%{background-position:91% 100%}
    100%{background-position:10% 0%}
}
@-moz-keyframes Animation {
    0%{background-position:10% 0%}
    50%{background-position:91% 100%}
    100%{background-position:10% 0%}
}
@keyframes Animation { 
    0%{background-position:10% 0%}
    50%{background-position:91% 100%}
    100%{background-position:10% 0%}
}

/* Styling for the animated pattern in the background */
.animated-pattern {
    position: fixed;
    inset: 0;
    z-index: -10;
    background-image:
      linear-gradient(135deg,
        #15b97b 0%,
        #00a388 20%,
        #008d8c 40%,
        #007584 60%,
        #195e72 80%,
        #2f4858 100%
      ),
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"><circle cx="20" cy="20" r="8" fill="rgba(255,255,255,0.2)" /></svg>');
    background-repeat: no-repeat, repeat;
    background-size: 200% 200%;
    animation: Animation 10s ease-in-out infinite;
}
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen w-full relative flex items-center justify-center px-4">

  <!-- Animated background pattern -->
  <div class="animated-pattern"></div>

  <!-- Main card container for the registration form -->
  <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl w-full max-w-md transform hover:scale-105 transition-all duration-300 z-10">

    <!-- Logo display -->
    <div class="w-24 h-24 mx-auto mb-5 rounded-full ring-2 ring-white/20 shadow-md bg-white overflow-hidden">
      <img src="{% static 'images/img1.jpg' %}"
           alt="Logo"
           class="object-contain ring-2 ring-white/20 p-2" />
    </div>

    <!-- Heading and subtext -->
    <h2 class="text-4xl font-extrabold text-white mb-2 text-center">Create Your Account</h2>
    <p class="text-sm text-white/80 mb-6 text-center">Fill out the form below to get started</p>

    <!-- Display Django messages (error, success, info) -->
    {% if messages %}
      <div class="mb-4">
        {% for message in messages %}
          <div class="message p-3 rounded-lg mb-2 shadow-md transition duration-300
                      {% if message.tags == 'error' %}bg-red-600 text-white border border-red-700
                      {% elif message.tags == 'success' %}bg-green-600 text-white border border-green-700
                      {% else %}bg-gray-200 text-black{% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Registration form -->
    <form method="POST" class="space-y-4">
      {% csrf_token %}

      <!-- Username input -->
      <div class="input-field relative">
        <input name="username" required
               value="{{ request.POST.username|default:'' }}"
               placeholder="Username"
               class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 focus:bg-opacity-30 focus:ring-2 focus:ring-emerald-300 text-white placeholder-white/60 transition duration-200" />
        <i class="fas fa-user absolute right-3 top-3 text-white/90"></i>
      </div>

      <!-- Email input -->
      <div class="input-field relative">
        <input name="email" type="email" required
               value="{{ request.POST.email|default:'' }}"
               placeholder="Email"
               class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 focus:bg-opacity-30 focus:ring-2 focus:ring-emerald-300 text-white placeholder-white/60 transition duration-200" />
        <i class="fas fa-envelope absolute right-3 top-3 text-white/90"></i>
      </div>

      <!-- Password input -->
      <div class="input-field relative">
        <input name="password1" type="password" required
               placeholder="Password"
               class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 focus:bg-opacity-30 focus:ring-2 focus:ring-emerald-300 text-white placeholder-white/60 transition duration-200" />
        <i class="fas fa-lock absolute right-3 top-3 text-white/90"></i>
      </div>

      <!-- Confirm password input -->
      <div class="input-field relative">
        <input name="password2" type="password" required
               placeholder="Confirm Password"
               class="w-full px-4 py-3 rounded-lg bg-white bg-opacity-20 focus:bg-opacity-30 focus:ring-2 focus:ring-emerald-300 text-white placeholder-white/60 transition duration-200" />
        <i class="fas fa-lock absolute right-3 top-3 text-white/90"></i>
      </div>

      <!-- Submit button -->
      <button type="submit" class="btn w-full bg-gradient-to-r from-emerald-500 to-teal-400 text-white font-bold py-3 px-4 rounded-lg hover:opacity-90 focus:ring-4 focus:ring-emerald-300 transition duration-300 transform hover:scale-105">
        Register <i class="fas fa-arrow-right ml-2"></i>
      </button>
    </form>

    <!-- Link to login page for existing users -->
    <p class="text-white/90 text-center mt-6">
      Already have an account?
      <a href="{% url 'login' %}" class="font-bold hover:underline">Login</a>
    </p>

    <!-- Social media links -->
    <div class="mt-6 flex justify-center space-x-4">
      <a href="#" class="text-white hover:text-emerald-200"><i class="fab fa-facebook-f text-2xl"></i></a>
      <a href="#" class="text-white hover:text-emerald-200"><i class="fab fa-twitter text-2xl"></i></a>
      <a href="#" class="text-white hover:text-emerald-200"><i class="fab fa-google text-2xl"></i></a>
    </div>
  </div>
</div>

<!-- GSAP animations for inputs, buttons, and messages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
<script>
  // Animate form inputs sliding in from the left
  gsap.from(".input-field", { opacity:0, x:-50, stagger:0.15, duration:0.7, ease:"power2.out" });

  // Animate social media icons floating up and down repeatedly
  gsap.to(".fab", { y:-8, stagger:0.1, duration:0.8, repeat:-1, yoyo:true, ease:"power1.inOut" });

  // Animate messages fading in
  gsap.from(".message", { opacity: 0, y: -20, stagger: 0.1, duration: 0.6, ease:"power2.out" });

  // Fade out messages after 5 seconds
  gsap.to(".message", { opacity: 0, y: -20, delay: 5, duration: 0.6, stagger: 0.1, ease:"power2.in" });
</script>
{% endblock %}
