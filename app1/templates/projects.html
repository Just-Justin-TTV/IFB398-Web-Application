{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind v3 CDN (simplest to start). Remove the old v2 link. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Optional: quick design tokens -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              brand: { DEFAULT: "#0ea5e9", dark: "#0284c7" }, // cyan
            },
            borderRadius: { "2xl": "1rem" },
          },
        },
      };
    </script>
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>

  <body class="min-h-screen bg-gray-50 text-gray-900">
    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <aside class="w-72 bg-white border-r shadow-sm flex flex-col">
        <div class="px-6 py-6 border-b">
          <div class="flex items-center gap-3">
            <img src="{% static 'images/img4.jpg' %}" alt="Logo" class="w-12 h-12 rounded-full object-cover" />
            <div>
              <p class="text-sm text-gray-500">Welcome</p>
              <p class="font-semibold">{{ request.session.user_name }}</p>
            </div>
          </div>
        </div>

        <nav class="flex-1 px-4 py-4">
          <ul class="space-y-2">
            <li>
              <a href="{% url 'dashboard' %}"
                 class="flex items-center gap-3 px-3 py-2.5 rounded-xl border border-gray-200 hover:bg-gray-50 transition">
                <span class="material-icons">dashboard</span>
                <span class="font-medium">Dashboard</span>
              </a>
            </li>

            <li>
              <a href="{% url 'projects' %}"
                 class="flex items-center gap-3 px-3 py-2.5 rounded-xl bg-brand text-white shadow transition hover:bg-brand-dark">
                <span class="material-icons">folder</span>
                <span class="font-medium">Projects</span>
              </a>
            </li>

            <li>
              <a href="{% url 'carbon' %}"
                 class="flex items-center gap-3 px-3 py-2.5 rounded-xl border border-gray-200 hover:bg-gray-50 transition">
                <span class="material-icons">build</span>
                <span class="font-medium">Interventions</span>
              </a>
            </li>

            <li>
              <a href="#"
                 class="flex items-center gap-3 px-3 py-2.5 rounded-xl border border-gray-200 hover:bg-gray-50 transition">
                <span class="material-icons">calculate</span>
                <span class="font-medium">Cost Matrix</span>
              </a>
            </li>

            <li>
              <a href="#"
                 class="flex items-center gap-3 px-3 py-2.5 rounded-xl border border-gray-200 hover:bg-gray-50 transition">
                <span class="material-icons">description</span>
                <span class="font-medium">Reports</span>
              </a>
            </li>

            <li>
              <a href="#"
                 class="flex items-center gap-3 px-3 py-2.5 rounded-xl border border-gray-200 hover:bg-gray-50 transition">
                <span class="material-icons">settings</span>
                <span class="font-medium">Settings</span>
              </a>
            </li>
          </ul>
        </nav>
      </aside>

  <!-- Main content -->
  <main class="col-span-12 md:col-span-9 lg:col-span-9">
    <!-- Header actions -->
    <div class="flex items-center justify-between">
      <h1 class="text-3xl font-bold">Projects</h1>
      <div class="flex items-center gap-3">
        <button class="h-10 w-10 grid place-items-center rounded-full border bg-white hover:bg-gray-50">
          <span class="material-icons">notifications</span>
        </button>
        <a href="{% url 'create_project' %}" class="inline-flex items-center gap-2 rounded-2xl bg-cyan-600 px-4 py-2.5 text-white hover:bg-cyan-700">
          <span class="material-icons text-[20px]">add</span>
          <span class="font-medium">New Project</span>
        </a>
      </div>
    </div>

    <!-- Search -->
    <div class="mt-6">
      <div class="bg-white rounded-2xl border shadow-sm p-3">
        <div class="relative">
          <input id="search" onkeyup="filterTable()" type="text" placeholder="Search projects"
                 class="w-full rounded-xl border px-10 py-2 focus:outline-none focus:ring-2 focus:ring-cyan-200 focus:border-cyan-600">
          <span class="material-icons absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">search</span>
        </div>
      </div>
    </div>

    <!-- Table card -->
    <section class="mt-4">
      <div class="bg-white rounded-2xl border shadow-sm overflow-hidden">
        <table class="min-w-full text-sm">
          <thead class="bg-gray-50 text-gray-600">
            <tr>
              <th class="px-6 py-3 text-left font-semibold">Project Name</th>
              <th class="px-6 py-3 text-left font-semibold">Year</th>
              <th class="px-6 py-3 text-left font-semibold">Region</th>
              <th class="px-6 py-3 text-left font-semibold">Carbon Total</th>
              <th class="px-6 py-3 text-left font-semibold">Cost</th>
              <th class="px-6 py-3 text-left font-semibold">Last Edited</th>
              <th class="px-6 py-3 text-left font-semibold">Actions</th>
            </tr>
          </thead>
          <tbody id="projectTable" class="divide-y divide-gray-100">
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-3">Pinecrest Logistics</td>
              <td class="px-6 py-3">2025</td>
              <td class="px-6 py-3">AU</td>
              <td class="px-6 py-3">248</td>
              <td class="px-6 py-3">$21,080</td>
              <td class="px-6 py-3">01/05/2025</td>
              <td class="px-6 py-3">
                <a href="#" class="inline-flex items-center gap-1 text-cyan-700 hover:underline">
                  <span class="material-icons text-[18px]">edit</span> Edit
                </a>
              </td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-3">Aurora Data Center</td>
              <td class="px-6 py-3">2025</td>
              <td class="px-6 py-3">UK</td>
              <td class="px-6 py-3">176</td>
              <td class="px-6 py-3">$21,120</td>
              <td class="px-6 py-3">29/04/2025</td>
              <td class="px-6 py-3">
                <a href="#" class="inline-flex items-center gap-1 text-cyan-700 hover:underline">
                  <span class="material-icons text-[18px]">edit</span> Edit
                </a>
              </td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-3">Cascade Elementary</td>
              <td class="px-6 py-3">2025</td>
              <td class="px-6 py-3">PNG</td>
              <td class="px-6 py-3">512</td>
              <td class="px-6 py-3">$33,280</td>
              <td class="px-6 py-3">29/04/2025</td>
              <td class="px-6 py-3">
                <a href="#" class="inline-flex items-center gap-1 text-cyan-700 hover:underline">
                  <span class="material-icons text-[18px]">edit</span> Edit
                </a>
              </td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-3">MetroCore Sustainable</td>
              <td class="px-6 py-3">2025</td>
              <td class="px-6 py-3">UK</td>
              <td class="px-6 py-3">89</td>
              <td class="px-6 py-3">$13,350</td>
              <td class="px-6 py-3">13/04/2025</td>
              <td class="px-6 py-3">
                <a href="#" class="inline-flex items-center gap-1 text-cyan-700 hover:underline">
                  <span class="material-icons text-[18px]">edit</span> Edit
                </a>
              </td>
            </tr>
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-3">Suncrest Senior</td>
              <td class="px-6 py-3">2025</td>
              <td class="px-6 py-3">PNG</td>
              <td class="px-6 py-3">321</td>
              <td class="px-6 py-3">$14,445</td>
              <td class="px-6 py-3">14/04/2025</td>
              <td class="px-6 py-3">
                <a href="#" class="inline-flex items-center gap-1 text-cyan-700 hover:underline">
                  <span class="material-icons text-[18px]">edit</span> Edit
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>

<script>
  function filterTable() {
    const q = document.getElementById("search")?.value?.trim().toUpperCase() || "";
    const rows = document.querySelectorAll("#projectTable tr");
    rows.forEach(row => {
      const nameCell = row.cells[0];
      const txt = (nameCell?.textContent || "").toUpperCase();
      row.style.display = txt.includes(q) ? "" : "none";
    });
  }
</script>
